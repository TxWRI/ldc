<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ldc">
<title>Why Units • ldc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_EB%20Garamond-0.4.0/font.css" rel="stylesheet">
<link href="../deps/_JetBrains%20Mono-0.4.0/font.css" rel="stylesheet">
<link href="../deps/_Oswald-0.4.0/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Why Units">
<meta property="og:description" content="ldc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ldc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction to ldc</a>
    <a class="dropdown-item" href="../articles/exceedance.html">Quantile Estimation Procedures</a>
    <a class="dropdown-item" href="../articles/units.html">Why Units</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TxWRI/ldc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="units_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Why Units</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TxWRI/ldc/blob/gh-pages/vignettes/articles/units.Rmd" class="external-link"><code>vignettes/articles/units.Rmd</code></a></small>
      <div class="d-none name"><code>units.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TxWRI/ldc" class="external-link">ldc</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="introduction-to-units">Introduction to Units<a class="anchor" aria-label="anchor" href="#introduction-to-units"></a>
</h2>
<p>ldc relies on the <a href="https://r-quantities.github.io/units/index.html" class="external-link">units</a> package to facilitate unit conversions and tracking of units across variables. This is handy if we want to transform units on the fly. I suggest briefly reviewing the <a href="https://r-quantities.github.io/units/articles/measurement_units_in_R.html#handling-data-with-units-in-r-the-units-package" class="external-link">units package documentation</a> to become familiar with how units objects are handled. A brief example is shown below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-quantities/units/" class="external-link">units</a></span><span class="op">)</span>
<span class="co">#&gt; udunits database from /usr/share/xml/udunits/udunits2.xml</span>
<span class="co">## generate random data</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, meanlog <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, sdlog <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>

<span class="co">## attach units, cubic feet per second</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ft^3/s"</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; Units: [ft^3/s]</span>
<span class="co">#&gt;   [1]   198.244738     1.377296    22.986791  1744.141817    10.722960</span>
<span class="co">#&gt;   [6]   184.201175     7.096251    82.587769    58.993986   501.604566</span>
<span class="co">#&gt;  [11]    30.155371     6.533947    62.429439 17006.730933  2271.703151</span>
<span class="co">#&gt;  [16]    13.365492   212.617723    27.044502     4.665912    31.864053</span>
<span class="co">#&gt;  [21]    65.564056   528.648919     4.462644  6016.813560     6.588087</span>
<span class="co">#&gt;  [26]    14.502402  1392.888883    45.628694    24.164122    50.279935</span>
<span class="co">#&gt;  [31]    12.234267    44.576009     4.470887    57.691876    40.937223</span>
<span class="co">#&gt;  [36]    44.090073     5.232488   654.161344    28.645744     5.502458</span>
<span class="co">#&gt;  [41]  3303.771576   242.737185    11.105492  1083.307517   853.245838</span>
<span class="co">#&gt;  [46]   110.781533    16.398656   461.277497    69.405736   117.954362</span>
<span class="co">#&gt;  [51]     2.189945   118.595715  3835.141619    30.486449   159.909549</span>
<span class="co">#&gt;  [56]    16.240850   151.832580  1233.088694    54.726964    23.100766</span>
<span class="co">#&gt;  [61]   440.834235   630.081457  1990.296104    12.925787  1587.621005</span>
<span class="co">#&gt;  [66]     6.142746   630.916843 11173.262114    68.351378 13789.569070</span>
<span class="co">#&gt;  [71]     1.573709    32.497518   522.000903    14.542676    54.479840</span>
<span class="co">#&gt;  [76]    31.692962   214.984260    44.418574   114.634036   536.240390</span>
<span class="co">#&gt;  [81]   291.390345    37.438940    94.015468   790.385016  1454.434591</span>
<span class="co">#&gt;  [86]   381.905914    30.497195    37.086893     4.214432   926.021152</span>
<span class="co">#&gt;  [91]  2278.752823    14.901414  2412.694040    34.534378    30.528571</span>
<span class="co">#&gt;  [96]     3.633051  1329.385884   902.954793    87.276794     6.329255</span></code></pre></div>
<p>x is a object of type units which can be used with most R expressions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">*</span> <span class="fl">86400</span>
<span class="co">#&gt; Units: [ft^3/s]</span>
<span class="co">#&gt;   [1]   17128345.4     118998.3    1986058.7  150693853.0     926463.8</span>
<span class="co">#&gt;   [6]   15914981.5     613116.1    7135583.2    5097080.4   43338634.5</span>
<span class="co">#&gt;  [11]    2605424.0     564533.1    5393903.5 1469381552.6  196275152.2</span>
<span class="co">#&gt;  [16]    1154778.5   18370171.3    2336644.9     403134.8    2753054.2</span>
<span class="co">#&gt;  [21]    5664734.5   45675266.6     385572.4  519852691.6     569210.7</span>
<span class="co">#&gt;  [26]    1253007.5  120345599.4    3942319.2    2087780.1    4344186.4</span>
<span class="co">#&gt;  [31]    1057040.6    3851367.1     386284.6    4984578.1    3536976.1</span>
<span class="co">#&gt;  [36]    3809382.3     452087.0   56519540.1    2474992.3     475412.4</span>
<span class="co">#&gt;  [41]  285445864.1   20972492.8     959514.5   93597769.4   73720440.4</span>
<span class="co">#&gt;  [46]    9571524.5    1416843.9   39854375.8    5996655.6   10191256.8</span>
<span class="co">#&gt;  [51]     189211.2   10246669.8  331356235.9    2634029.2   13816185.0</span>
<span class="co">#&gt;  [56]    1403209.4   13118335.0  106538863.1    4728409.7    1995906.2</span>
<span class="co">#&gt;  [61]   38088077.9   54439037.9  171961583.4    1116788.0  137170454.8</span>
<span class="co">#&gt;  [66]     530733.3   54511215.3  965369846.7    5905559.0 1191418767.6</span>
<span class="co">#&gt;  [71]     135968.5    2807785.5   45100878.0    1256487.2    4707058.2</span>
<span class="co">#&gt;  [76]    2738271.9   18574640.1    3837764.8    9904380.7   46331169.7</span>
<span class="co">#&gt;  [81]   25176125.8    3234724.4    8122936.4   68289265.4  125663148.6</span>
<span class="co">#&gt;  [86]   32996670.9    2634957.6    3204307.6     364126.9   80008227.6</span>
<span class="co">#&gt;  [91]  196884243.9    1287482.2  208456765.0    2983770.3    2637668.6</span>
<span class="co">#&gt;  [96]     313895.6  114858940.3   78015294.2    7540715.0     546847.6</span></code></pre></div>
<p>The units can be converted:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## convert to cubic feet per day</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ft^3/d"</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; Units: [ft^3/d]</span>
<span class="co">#&gt;   [1]   17128345.4     118998.3    1986058.7  150693853.0     926463.8</span>
<span class="co">#&gt;   [6]   15914981.5     613116.1    7135583.2    5097080.4   43338634.5</span>
<span class="co">#&gt;  [11]    2605424.0     564533.1    5393903.5 1469381552.6  196275152.2</span>
<span class="co">#&gt;  [16]    1154778.5   18370171.3    2336644.9     403134.8    2753054.2</span>
<span class="co">#&gt;  [21]    5664734.5   45675266.6     385572.4  519852691.6     569210.7</span>
<span class="co">#&gt;  [26]    1253007.5  120345599.4    3942319.2    2087780.1    4344186.4</span>
<span class="co">#&gt;  [31]    1057040.6    3851367.1     386284.6    4984578.1    3536976.1</span>
<span class="co">#&gt;  [36]    3809382.3     452087.0   56519540.1    2474992.3     475412.4</span>
<span class="co">#&gt;  [41]  285445864.1   20972492.8     959514.5   93597769.4   73720440.4</span>
<span class="co">#&gt;  [46]    9571524.5    1416843.9   39854375.8    5996655.6   10191256.8</span>
<span class="co">#&gt;  [51]     189211.2   10246669.8  331356235.9    2634029.2   13816185.0</span>
<span class="co">#&gt;  [56]    1403209.4   13118335.0  106538863.1    4728409.7    1995906.2</span>
<span class="co">#&gt;  [61]   38088077.9   54439037.9  171961583.4    1116788.0  137170454.8</span>
<span class="co">#&gt;  [66]     530733.3   54511215.3  965369846.7    5905559.0 1191418767.6</span>
<span class="co">#&gt;  [71]     135968.5    2807785.5   45100878.0    1256487.2    4707058.2</span>
<span class="co">#&gt;  [76]    2738271.9   18574640.1    3837764.8    9904380.7   46331169.7</span>
<span class="co">#&gt;  [81]   25176125.8    3234724.4    8122936.4   68289265.4  125663148.6</span>
<span class="co">#&gt;  [86]   32996670.9    2634957.6    3204307.6     364126.9   80008227.6</span>
<span class="co">#&gt;  [91]  196884243.9    1287482.2  208456765.0    2983770.3    2637668.6</span>
<span class="co">#&gt;  [96]     313895.6  114858940.3   78015294.2    7540715.0     546847.6</span></code></pre></div>
<p>Units can be plotted:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## convert to million gallons per day</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"1E6gallons/day"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<p><img src="units_files/figure-html/unitshistbase-1.png" width="700"></p>
<p>The <a href="https://ggforce.data-imaginist.com/" class="external-link">ggforce</a> package is required to handle plotting units in ggplot2:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com" class="external-link">ggforce</a></span><span class="op">)</span>
<span class="co">#&gt; Registered S3 method overwritten by 'ggforce':</span>
<span class="co">#&gt;   method           from </span>
<span class="co">#&gt;   scale_type.units units</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> </code></pre></div>
<p><img src="units_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="units-with-ldc">Units with ldc<a class="anchor" aria-label="anchor" href="#units-with-ldc"></a>
</h2>
<p>Stream loads are measured in pounds or kilograms per day for pollutants such as nutrients and sediment. Fecal bacteria loads are typically in colony forming units (cfu) or most probable number (MPN) per day. The included <code>tres_palacios</code> dataset includes bacteria and flow measurements from the Tres Palacios river. Bacteria measurements will need to units in “cfu/100mL” and flow should be in “cubic feet per second.”</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="co">## create a cfu unit. it is a simple count, so we just add it as an arbitrary unit.</span>
<span class="fu"><a href="https://rdrr.io/pkg/units/man/install_unit.html" class="external-link">install_unit</a></span><span class="op">(</span><span class="st">"cfu"</span><span class="op">)</span>

<span class="co">## format the data for use in ldc</span>
<span class="va">tres_palacios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">tres_palacios</span><span class="op">)</span> |&gt;
  <span class="co">## flow must have units, here is is in cfs</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="st">"ft^3/s"</span><span class="op">)</span><span class="op">)</span>|&gt;
  <span class="co">## pollutant concentration must have units</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Indicator_Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Indicator_Bacteria</span>, <span class="st">"cfu/100mL"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tres_palacios</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 4</span></span>
<span class="co">#&gt;    site_no  Date           Flow Indicator_Bacteria</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[ft^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-01-01     0.84                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-01-02     3                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-01-03     3.4                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-01-04     2.6                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-01-05     1.6                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-01-06     3.2                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-01-07    11                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-08    17                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-01-09    22                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-01-10    18                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows</span></span></code></pre></div>
<p>The tibble above shows the correct units in each column. What if we want to use metric units for flow?</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tres_palacios</span> <span class="op">&lt;-</span> <span class="va">tres_palacios</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="st">"m^3/s"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tres_palacios</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 4</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-01-01  0.023<span style="text-decoration: underline;">8</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-01-02  0.085<span style="text-decoration: underline;">0</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-01-03  0.096<span style="text-decoration: underline;">3</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-01-04  0.073<span style="text-decoration: underline;">6</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-01-05  0.045<span style="text-decoration: underline;">3</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-01-06  0.090<span style="text-decoration: underline;">6</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-01-07  0.311                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-08  0.481                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-01-09  0.623                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-01-10  0.510                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows</span></span></code></pre></div>
<p>Now we can calculate the flow and load exceedance probabilities using <code><a href="../reference/calc_ldc.html">calc_ldc()</a></code>. Q and C arguments must have units attached and C must be a concentration unit (mass or counts divided by volume).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">## specify the allowable concentration</span>
<span class="va">allowable_concentration</span> <span class="op">&lt;-</span> <span class="fl">126</span>
<span class="co">## set the units</span>
<span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">units</a></span><span class="op">(</span><span class="va">allowable_concentration</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"cfu/100mL"</span>

<span class="co">## calculate the exceedance probabilities along with</span>
<span class="co">## allowable pollutant loads and measured pollutant loads</span>
<span class="co">## at given probabilities</span>
<span class="va">df_ldc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_ldc.html">calc_ldc</a></span><span class="op">(</span><span class="va">tres_palacios</span>, 
                   Q <span class="op">=</span> <span class="va">Flow</span>, 
                   C <span class="op">=</span> <span class="va">Indicator_Bacteria</span>, 
                   allowable_concentration <span class="op">=</span> <span class="va">allowable_concentration</span><span class="op">)</span>

<span class="va">df_ldc</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 9</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria Daily_Flow_Volume Daily_Load</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span>         <span style="color: #949494;">[100mL/d]</span>    <span style="color: #949494;">[cfu/d]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-08-18 0.006<span style="text-decoration: underline;">23</span>                 <span style="color: #BB0000;">NA</span>          5<span style="text-decoration: underline;">382</span>466.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-03-07 0.011<span style="text-decoration: underline;">9</span>                  <span style="color: #BB0000;">NA</span>         10<span style="text-decoration: underline;">275</span>617.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-03-06 0.017<span style="text-decoration: underline;">0</span>                  <span style="color: #BB0000;">NA</span>         14<span style="text-decoration: underline;">679</span>453.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-08-22 0.021<span style="text-decoration: underline;">2</span>                  <span style="color: #BB0000;">NA</span>         18<span style="text-decoration: underline;">349</span>317.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-03-08 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">083</span>289.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-08-17 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">083</span>289.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-09-11 0.022<span style="text-decoration: underline;">7</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">572</span>604.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-01 0.023<span style="text-decoration: underline;">8</span>                  <span style="color: #BB0000;">NA</span>         20<span style="text-decoration: underline;">551</span>235.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-08-21 0.026<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>         22<span style="text-decoration: underline;">753</span>153.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-03-05 0.028<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>         24<span style="text-decoration: underline;">465</span>755.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows, and 3 more variables: Allowable_Daily_Load [cfu/d],</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   P_Exceedance &lt;dbl&gt;, Flow_Category &lt;fct&gt;</span></span></code></pre></div>
<p>Now we have the percent exceedance for daily flow, flow volume, and allowable daily loads. The daily flow volume and daily load volume are huge numbers, so it might make sense to convert those units.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ldc</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Daily_Flow_Volume <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Daily_Flow_Volume</span>, <span class="st">"m^3/day"</span><span class="op">)</span>,
         Allowable_Daily_Load <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Allowable_Daily_Load</span>, <span class="st">"1E9cfu/day"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 9</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria Daily_Flow_Volume Daily_Load</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span>           <span style="color: #949494;">[m^3/d]</span>    <span style="color: #949494;">[cfu/d]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-08-18 0.006<span style="text-decoration: underline;">23</span>                 <span style="color: #BB0000;">NA</span>              538.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-03-07 0.011<span style="text-decoration: underline;">9</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>028.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-03-06 0.017<span style="text-decoration: underline;">0</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>468.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-08-22 0.021<span style="text-decoration: underline;">2</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>835.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-03-08 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>908.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-08-17 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>908.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-09-11 0.022<span style="text-decoration: underline;">7</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>957.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-01 0.023<span style="text-decoration: underline;">8</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>055.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-08-21 0.026<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>275.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-03-05 0.028<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>447.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows, and 3 more variables:</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   Allowable_Daily_Load [1E9cfu/d], P_Exceedance &lt;dbl&gt;, Flow_Category &lt;fct&gt;</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/mps9506" class="external-link">Michael Schramm</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
