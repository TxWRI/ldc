<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ldc">
<title>Why Units • ldc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_EB%20Garamond-0.4.0/font.css" rel="stylesheet">
<link href="../deps/_JetBrains%20Mono-0.4.0/font.css" rel="stylesheet">
<link href="../deps/_Oswald-0.4.0/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Why Units">
<meta property="og:description" content="ldc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ldc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction to ldc</a>
    <a class="dropdown-item" href="../articles/exceedance.html">Quantile Estimation Procedures</a>
    <a class="dropdown-item" href="../articles/units.html">Why Units</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TxWRI/ldc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="units_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Why Units</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TxWRI/ldc/blob/gh-pages/vignettes/articles/units.Rmd" class="external-link"><code>vignettes/articles/units.Rmd</code></a></small>
      <div class="d-none name"><code>units.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TxWRI/ldc" class="external-link">ldc</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="introduction-to-units">Introduction to Units<a class="anchor" aria-label="anchor" href="#introduction-to-units"></a>
</h2>
<p>ldc relies on the <a href="https://r-quantities.github.io/units/index.html" class="external-link">units</a> package to facilitate unit conversions and tracking of units across variables. This is handy if we want to transform units on the fly. I suggest briefly reviewing the <a href="https://r-quantities.github.io/units/articles/measurement_units_in_R.html#handling-data-with-units-in-r-the-units-package" class="external-link">units package documentation</a> to become familiar with how units objects are handled. A brief example is shown below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-quantities/units/" class="external-link">units</a></span><span class="op">)</span>
<span class="co">#&gt; udunits database from /usr/share/xml/udunits/udunits2.xml</span>
<span class="co">## generate random data</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, meanlog <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, sdlog <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>

<span class="co">## attach units, cubic feet per second</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ft^3/s"</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; Units: [ft^3/s]</span>
<span class="co">#&gt;   [1] 3.305217e+03 2.237243e+01 6.843526e+01 5.130397e-01 8.465099e+02</span>
<span class="co">#&gt;   [6] 3.261493e+01 4.209772e+01 1.619673e+01 2.472124e+01 8.180078e+02</span>
<span class="co">#&gt;  [11] 5.910870e+03 1.002994e+01 7.187791e+00 5.559155e+02 2.669817e+01</span>
<span class="co">#&gt;  [16] 7.557542e+01 1.738401e+01 2.705508e+01 4.896507e+00 1.303612e+03</span>
<span class="co">#&gt;  [21] 1.439782e+01 3.661344e+01 5.021760e+03 1.647707e+02 2.560844e+03</span>
<span class="co">#&gt;  [26] 7.364910e-01 6.789498e+02 1.184617e+01 7.315961e+01 1.384772e+01</span>
<span class="co">#&gt;  [31] 7.428468e+02 7.576590e+02 1.375925e+02 5.815625e+00 4.023443e+01</span>
<span class="co">#&gt;  [36] 2.602308e+01 3.559056e+00 2.981858e+04 7.992568e+01 5.448878e+00</span>
<span class="co">#&gt;  [41] 5.757906e+02 2.459403e+00 1.312775e+03 6.292475e+00 7.633091e+00</span>
<span class="co">#&gt;  [46] 3.772260e+02 1.311790e+01 4.947215e+02 1.808063e+02 2.243639e+02</span>
<span class="co">#&gt;  [51] 4.623318e+02 1.027519e+02 2.078196e+02 6.443158e+00 3.172421e+02</span>
<span class="co">#&gt;  [56] 1.887825e+00 1.548666e+02 3.073110e+01 1.224608e+00 1.333124e+01</span>
<span class="co">#&gt;  [61] 7.415647e+01 9.282686e+01 9.816047e+02 5.311807e+02 9.999362e+03</span>
<span class="co">#&gt;  [66] 7.673251e+01 1.993032e+04 3.037631e+02 4.225274e-01 8.347452e+01</span>
<span class="co">#&gt;  [71] 6.504620e+02 1.784513e+03 2.930827e+02 2.668672e+03 8.941402e+00</span>
<span class="co">#&gt;  [76] 1.019004e+02 4.301757e+00 1.678122e+02 1.166100e+01 2.072369e+01</span>
<span class="co">#&gt;  [81] 3.715639e+01 1.617803e+02 1.397819e+03 5.458505e+03 3.031891e+02</span>
<span class="co">#&gt;  [86] 2.377440e+01 1.786722e+01 2.393758e+01 1.984455e+01 7.954231e+02</span>
<span class="co">#&gt;  [91] 1.380240e+02 3.489321e+03 4.282422e+02 3.968873e+01 7.352239e+01</span>
<span class="co">#&gt;  [96] 3.573688e+01 5.207961e+01 7.638658e+01 2.172734e+02 1.113797e+01</span></code></pre></div>
<p>x is a object of type units which can be used with most R expressions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">*</span> <span class="fl">86400</span>
<span class="co">#&gt; Units: [ft^3/s]</span>
<span class="co">#&gt;   [1] 2.855708e+08 1.932978e+06 5.912806e+06 4.432663e+04 7.313846e+07</span>
<span class="co">#&gt;   [6] 2.817930e+06 3.637243e+06 1.399398e+06 2.135916e+06 7.067587e+07</span>
<span class="co">#&gt;  [11] 5.106992e+08 8.665870e+05 6.210251e+05 4.803110e+07 2.306722e+06</span>
<span class="co">#&gt;  [16] 6.529716e+06 1.501978e+06 2.337559e+06 4.230582e+05 1.126321e+08</span>
<span class="co">#&gt;  [21] 1.243972e+06 3.163401e+06 4.338801e+08 1.423619e+07 2.212569e+08</span>
<span class="co">#&gt;  [26] 6.363282e+04 5.866127e+07 1.023509e+06 6.320990e+06 1.196443e+06</span>
<span class="co">#&gt;  [31] 6.418197e+07 6.546174e+07 1.188799e+07 5.024700e+05 3.476255e+06</span>
<span class="co">#&gt;  [36] 2.248394e+06 3.075024e+05 2.576326e+09 6.905579e+06 4.707831e+05</span>
<span class="co">#&gt;  [41] 4.974831e+07 2.124924e+05 1.134238e+08 5.436698e+05 6.594990e+05</span>
<span class="co">#&gt;  [46] 3.259233e+07 1.133386e+06 4.274394e+07 1.562166e+07 1.938504e+07</span>
<span class="co">#&gt;  [51] 3.994547e+07 8.877762e+06 1.795562e+07 5.566888e+05 2.740972e+07</span>
<span class="co">#&gt;  [56] 1.631081e+05 1.338047e+07 2.655167e+06 1.058061e+05 1.151819e+06</span>
<span class="co">#&gt;  [61] 6.407119e+06 8.020241e+06 8.481065e+07 4.589401e+07 8.639449e+08</span>
<span class="co">#&gt;  [66] 6.629689e+06 1.721980e+09 2.624513e+07 3.650637e+04 7.212198e+06</span>
<span class="co">#&gt;  [71] 5.619992e+07 1.541820e+08 2.532235e+07 2.305732e+08 7.725371e+05</span>
<span class="co">#&gt;  [76] 8.804192e+06 3.716718e+05 1.449897e+07 1.007511e+06 1.790527e+06</span>
<span class="co">#&gt;  [81] 3.210312e+06 1.397782e+07 1.207715e+08 4.716148e+08 2.619554e+07</span>
<span class="co">#&gt;  [86] 2.054108e+06 1.543728e+06 2.068207e+06 1.714569e+06 6.872456e+07</span>
<span class="co">#&gt;  [91] 1.192528e+07 3.014773e+08 3.700012e+07 3.429106e+06 6.352335e+06</span>
<span class="co">#&gt;  [96] 3.087667e+06 4.499678e+06 6.599801e+06 1.877242e+07 9.623207e+05</span></code></pre></div>
<p>The units can be converted:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## convert to cubic feet per day</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ft^3/d"</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; Units: [ft^3/d]</span>
<span class="co">#&gt;   [1] 2.855708e+08 1.932978e+06 5.912806e+06 4.432663e+04 7.313846e+07</span>
<span class="co">#&gt;   [6] 2.817930e+06 3.637243e+06 1.399398e+06 2.135916e+06 7.067587e+07</span>
<span class="co">#&gt;  [11] 5.106992e+08 8.665870e+05 6.210251e+05 4.803110e+07 2.306722e+06</span>
<span class="co">#&gt;  [16] 6.529716e+06 1.501978e+06 2.337559e+06 4.230582e+05 1.126321e+08</span>
<span class="co">#&gt;  [21] 1.243972e+06 3.163401e+06 4.338801e+08 1.423619e+07 2.212569e+08</span>
<span class="co">#&gt;  [26] 6.363282e+04 5.866127e+07 1.023509e+06 6.320990e+06 1.196443e+06</span>
<span class="co">#&gt;  [31] 6.418197e+07 6.546174e+07 1.188799e+07 5.024700e+05 3.476255e+06</span>
<span class="co">#&gt;  [36] 2.248394e+06 3.075024e+05 2.576326e+09 6.905579e+06 4.707831e+05</span>
<span class="co">#&gt;  [41] 4.974831e+07 2.124924e+05 1.134238e+08 5.436698e+05 6.594990e+05</span>
<span class="co">#&gt;  [46] 3.259233e+07 1.133386e+06 4.274394e+07 1.562166e+07 1.938504e+07</span>
<span class="co">#&gt;  [51] 3.994547e+07 8.877762e+06 1.795562e+07 5.566888e+05 2.740972e+07</span>
<span class="co">#&gt;  [56] 1.631081e+05 1.338047e+07 2.655167e+06 1.058061e+05 1.151819e+06</span>
<span class="co">#&gt;  [61] 6.407119e+06 8.020241e+06 8.481065e+07 4.589401e+07 8.639449e+08</span>
<span class="co">#&gt;  [66] 6.629689e+06 1.721980e+09 2.624513e+07 3.650637e+04 7.212198e+06</span>
<span class="co">#&gt;  [71] 5.619992e+07 1.541820e+08 2.532235e+07 2.305732e+08 7.725371e+05</span>
<span class="co">#&gt;  [76] 8.804192e+06 3.716718e+05 1.449897e+07 1.007511e+06 1.790527e+06</span>
<span class="co">#&gt;  [81] 3.210312e+06 1.397782e+07 1.207715e+08 4.716148e+08 2.619554e+07</span>
<span class="co">#&gt;  [86] 2.054108e+06 1.543728e+06 2.068207e+06 1.714569e+06 6.872456e+07</span>
<span class="co">#&gt;  [91] 1.192528e+07 3.014773e+08 3.700012e+07 3.429106e+06 6.352335e+06</span>
<span class="co">#&gt;  [96] 3.087667e+06 4.499678e+06 6.599801e+06 1.877242e+07 9.623207e+05</span></code></pre></div>
<p>Units can be plotted:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## convert to million gallons per day</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"1E6gallons/day"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<p><img src="units_files/figure-html/unitshistbase-1.png" width="700"></p>
<p>The <a href="https://ggforce.data-imaginist.com/" class="external-link">ggforce</a> package is required to handle plotting units in ggplot2:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com" class="external-link">ggforce</a></span><span class="op">)</span>
<span class="co">#&gt; Registered S3 method overwritten by 'ggforce':</span>
<span class="co">#&gt;   method           from </span>
<span class="co">#&gt;   scale_type.units units</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> </code></pre></div>
<p><img src="units_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="units-with-ldc">Units with ldc<a class="anchor" aria-label="anchor" href="#units-with-ldc"></a>
</h2>
<p>Stream loads are measured in pounds or kilograms per day for pollutants such as nutrients and sediment. Fecal bacteria loads are typically in colony forming units (cfu) or most probable number (MPN) per day. The included <code>tres_palacios</code> dataset includes bacteria and flow measurements from the Tres Palacios river. Bacteria measurements will need to units in “cfu/100mL” and flow should be in “cubic feet per second.”</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="co">## create a cfu unit. it is a simple count, so we just add it as an arbitrary unit.</span>
<span class="fu"><a href="https://rdrr.io/pkg/units/man/install_unit.html" class="external-link">install_unit</a></span><span class="op">(</span><span class="st">"cfu"</span><span class="op">)</span>

<span class="co">## format the data for use in ldc</span>
<span class="va">tres_palacios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">tres_palacios</span><span class="op">)</span> |&gt;
  <span class="co">## flow must have units, here is is in cfs</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="st">"ft^3/s"</span><span class="op">)</span><span class="op">)</span>|&gt;
  <span class="co">## pollutant concentration must have units</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Indicator_Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Indicator_Bacteria</span>, <span class="st">"cfu/100mL"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tres_palacios</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 4</span></span>
<span class="co">#&gt;    site_no  Date           Flow Indicator_Bacteria</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[ft^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-01-01     0.84                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-01-02     3                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-01-03     3.4                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-01-04     2.6                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-01-05     1.6                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-01-06     3.2                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-01-07    11                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-08    17                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-01-09    22                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-01-10    18                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows</span></span></code></pre></div>
<p>The tibble above shows the correct units in each column. What if we want to use metric units for flow?</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tres_palacios</span> <span class="op">&lt;-</span> <span class="va">tres_palacios</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="st">"m^3/s"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tres_palacios</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 4</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-01-01  0.023<span style="text-decoration: underline;">8</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-01-02  0.085<span style="text-decoration: underline;">0</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-01-03  0.096<span style="text-decoration: underline;">3</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-01-04  0.073<span style="text-decoration: underline;">6</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-01-05  0.045<span style="text-decoration: underline;">3</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-01-06  0.090<span style="text-decoration: underline;">6</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-01-07  0.311                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-08  0.481                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-01-09  0.623                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-01-10  0.510                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows</span></span></code></pre></div>
<p>Now we can calculate the flow and load exceedance probabilities using <code><a href="../reference/calc_ldc.html">calc_ldc()</a></code>. Q and C arguments must have units attached and C must be a concentration unit (mass or counts divided by volume).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">## specify the allowable concentration</span>
<span class="va">allowable_concentration</span> <span class="op">&lt;-</span> <span class="fl">126</span>
<span class="co">## set the units</span>
<span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">units</a></span><span class="op">(</span><span class="va">allowable_concentration</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"cfu/100mL"</span>

<span class="co">## calculate the exceedance probabilities along with</span>
<span class="co">## allowable pollutant loads and measured pollutant loads</span>
<span class="co">## at given probabilities</span>
<span class="va">df_ldc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_ldc.html">calc_ldc</a></span><span class="op">(</span><span class="va">tres_palacios</span>, 
                   Q <span class="op">=</span> <span class="va">Flow</span>, 
                   C <span class="op">=</span> <span class="va">Indicator_Bacteria</span>, 
                   allowable_concentration <span class="op">=</span> <span class="va">allowable_concentration</span><span class="op">)</span>

<span class="va">df_ldc</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 9</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria Daily_Flow_Volume Daily_Load</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span>         <span style="color: #949494;">[100mL/d]</span>    <span style="color: #949494;">[cfu/d]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-08-18 0.006<span style="text-decoration: underline;">23</span>                 <span style="color: #BB0000;">NA</span>          5<span style="text-decoration: underline;">382</span>466.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-03-07 0.011<span style="text-decoration: underline;">9</span>                  <span style="color: #BB0000;">NA</span>         10<span style="text-decoration: underline;">275</span>617.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-03-06 0.017<span style="text-decoration: underline;">0</span>                  <span style="color: #BB0000;">NA</span>         14<span style="text-decoration: underline;">679</span>453.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-08-22 0.021<span style="text-decoration: underline;">2</span>                  <span style="color: #BB0000;">NA</span>         18<span style="text-decoration: underline;">349</span>317.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-03-08 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">083</span>289.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-08-17 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">083</span>289.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-09-11 0.022<span style="text-decoration: underline;">7</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">572</span>604.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-01 0.023<span style="text-decoration: underline;">8</span>                  <span style="color: #BB0000;">NA</span>         20<span style="text-decoration: underline;">551</span>235.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-08-21 0.026<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>         22<span style="text-decoration: underline;">753</span>153.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-03-05 0.028<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>         24<span style="text-decoration: underline;">465</span>755.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows, and 3 more variables: Allowable_Daily_Load [cfu/d],</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   P_Exceedance &lt;dbl&gt;, Flow_Category &lt;fct&gt;</span></span></code></pre></div>
<p>Now we have the percent exceedance for daily flow, flow volume, and allowable daily loads. The daily flow volume and daily load volume are huge numbers, so it might make sense to convert those units.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ldc</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Daily_Flow_Volume <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Daily_Flow_Volume</span>, <span class="st">"m^3/day"</span><span class="op">)</span>,
         Allowable_Daily_Load <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Allowable_Daily_Load</span>, <span class="st">"1E9cfu/day"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 9</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria Daily_Flow_Volume Daily_Load</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span>           <span style="color: #949494;">[m^3/d]</span>    <span style="color: #949494;">[cfu/d]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-08-18 0.006<span style="text-decoration: underline;">23</span>                 <span style="color: #BB0000;">NA</span>              538.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-03-07 0.011<span style="text-decoration: underline;">9</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>028.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-03-06 0.017<span style="text-decoration: underline;">0</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>468.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-08-22 0.021<span style="text-decoration: underline;">2</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>835.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-03-08 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>908.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-08-17 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>908.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-09-11 0.022<span style="text-decoration: underline;">7</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>957.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-01 0.023<span style="text-decoration: underline;">8</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>055.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-08-21 0.026<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>275.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-03-05 0.028<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>447.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows, and 3 more variables:</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   Allowable_Daily_Load [1E9cfu/d], P_Exceedance &lt;dbl&gt;, Flow_Category &lt;fct&gt;</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/mps9506" class="external-link">Michael Schramm</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
