<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Why Units • ldc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Why Units">
<meta property="og:description" content="ldc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ldc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction.html">Introduction to ldc</a>
    </li>
    <li>
      <a href="../articles/exceedance.html">Quantile Estimation Procedures</a>
    </li>
    <li>
      <a href="../articles/units.html">Why Units</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/TxWRI/ldc/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="units_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Why Units</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/TxWRI/ldc/blob/gh-pages/vignettes/articles/units.Rmd" class="external-link"><code>vignettes/articles/units.Rmd</code></a></small>
      <div class="hidden name"><code>units.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TxWRI/ldc" class="external-link">ldc</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="introduction-to-units">Introduction to Units<a class="anchor" aria-label="anchor" href="#introduction-to-units"></a>
</h2>
<p>ldc relies on the <a href="https://r-quantities.github.io/units/index.html" class="external-link">units</a> package to facilitate unit conversions and tracking of units across variables. This is handy if we want to transform units on the fly. I suggest briefly reviewing the <a href="https://r-quantities.github.io/units/articles/measurement_units_in_R.html#handling-data-with-units-in-r-the-units-package" class="external-link">units package documentation</a> to become familiar with how units objects are handled. A brief example is shown below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-quantities/units/" class="external-link">units</a></span><span class="op">)</span>
<span class="co">#&gt; udunits database from /usr/share/xml/udunits/udunits2.xml</span>
<span class="co">## generate random data</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">100</span>, meanlog <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, sdlog <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>

<span class="co">## attach units, cubic feet per second</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ft^3/s"</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; Units: [ft^3/s]</span>
<span class="co">#&gt;   [1]   19.9101262   85.3201035    4.6322935   57.5754908 1882.6949699</span>
<span class="co">#&gt;   [6]  299.6057510    4.7218880  444.6182161    4.3605167  296.7863618</span>
<span class="co">#&gt;  [11] 3452.4705500   24.6807607  111.5494519  120.8911970   53.3408842</span>
<span class="co">#&gt;  [16] 4381.2494822   93.2068149    1.4081166    0.7166182    9.2366291</span>
<span class="co">#&gt;  [21] 2820.8319518  487.6546226 3405.6609165  202.5687541  128.5898372</span>
<span class="co">#&gt;  [26]  698.1518746    3.8207011  204.4990954 2327.7589887 2308.9841968</span>
<span class="co">#&gt;  [31]  875.5957060   54.5485540 1477.9212049    6.1653877  127.4194866</span>
<span class="co">#&gt;  [36]  219.7361209    2.3708132   56.3001511   29.8764930    1.2420633</span>
<span class="co">#&gt;  [41]  158.4977862   42.8425227   21.9556797  122.4595398 1681.5536891</span>
<span class="co">#&gt;  [46]  271.1072598  647.4798378  356.1408216   93.7624745 1714.2261222</span>
<span class="co">#&gt;  [51]   12.1269639  651.1800815 2398.2598904    4.0805299   72.3288915</span>
<span class="co">#&gt;  [56]    0.4068227   51.9773611   57.3494916   13.9539869  331.4525510</span>
<span class="co">#&gt;  [61]   42.0752217   37.0917901  112.4604581   17.8290961   91.3535180</span>
<span class="co">#&gt;  [66] 3089.9904287  628.1115498   77.8363146 1228.1766412   64.6209464</span>
<span class="co">#&gt;  [71]   68.8879541  405.7639302 1762.9131012    0.1488861 1176.9827200</span>
<span class="co">#&gt;  [76]    1.2459762  118.2232335 3062.0383455  416.2057011    5.5853330</span>
<span class="co">#&gt;  [81]   90.6454080    2.1725603  175.3547413  189.5831028   58.3820797</span>
<span class="co">#&gt;  [86]   15.9217423   14.0204886   33.5836504  527.1010733 2620.0361791</span>
<span class="co">#&gt;  [91]  148.4187011   15.5522542   67.3575265   17.6289640    8.1189989</span>
<span class="co">#&gt;  [96]   25.3786225    5.3761203  313.3404179  360.9288547   52.9708575</span></code></pre></div>
<p>x is a object of type units which can be used with most R expressions:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">*</span> <span class="fl">86400</span>
<span class="co">#&gt; Units: [ft^3/s]</span>
<span class="co">#&gt;   [1]   1720234.90   7371656.94    400230.15   4974522.40 162664845.40</span>
<span class="co">#&gt;   [6]  25885936.89    407971.12  38415013.87    376748.64  25642341.66</span>
<span class="co">#&gt;  [11] 298293455.52   2132417.73   9637872.64  10444999.42   4608652.39</span>
<span class="co">#&gt;  [16] 378539955.26   8053068.81    121661.27     61915.81    798044.76</span>
<span class="co">#&gt;  [21] 243719880.64  42133359.39 294249103.19  17501940.36  11110161.93</span>
<span class="co">#&gt;  [26]  60320321.97    330108.58  17668721.84 201118376.62 199496234.61</span>
<span class="co">#&gt;  [31]  75651469.00   4712995.07 127692392.10    532689.50  11009043.64</span>
<span class="co">#&gt;  [36]  18985200.84    204838.26   4864333.06   2581329.00    107314.27</span>
<span class="co">#&gt;  [41]  13694208.72   3701593.96   1896970.72  10580504.24 145286238.74</span>
<span class="co">#&gt;  [46]  23423667.25  55942257.99  30770566.99   8101077.80 148109136.96</span>
<span class="co">#&gt;  [51]   1047769.68  56261959.04 207209654.53    352557.78   6249216.23</span>
<span class="co">#&gt;  [56]     35149.49   4490844.00   4954996.07   1205624.46  28637500.40</span>
<span class="co">#&gt;  [61]   3635299.16   3204730.66   9716583.58   1540433.91   7892943.96</span>
<span class="co">#&gt;  [66] 266975173.04  54268837.90   6725057.58 106114461.80   5583249.77</span>
<span class="co">#&gt;  [71]   5951919.24  35058003.57 152315691.94     12863.76 101691307.01</span>
<span class="co">#&gt;  [76]    107652.34  10214487.38 264560113.05  35960172.58    482572.77</span>
<span class="co">#&gt;  [81]   7831763.25    187709.21  15150649.65  16379980.08   5044211.68</span>
<span class="co">#&gt;  [86]   1375638.53   1211370.21   2901627.40  45541532.74 226371125.87</span>
<span class="co">#&gt;  [91]  12823375.77   1343714.76   5819690.29   1523142.49    701481.50</span>
<span class="co">#&gt;  [96]   2192712.98    464496.80  27072612.10  31184253.04   4576682.08</span></code></pre></div>
<p>The units can be converted:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## convert to cubic feet per day</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"ft^3/d"</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; Units: [ft^3/d]</span>
<span class="co">#&gt;   [1]   1720234.90   7371656.94    400230.15   4974522.40 162664845.40</span>
<span class="co">#&gt;   [6]  25885936.89    407971.12  38415013.87    376748.64  25642341.66</span>
<span class="co">#&gt;  [11] 298293455.52   2132417.73   9637872.64  10444999.42   4608652.39</span>
<span class="co">#&gt;  [16] 378539955.26   8053068.81    121661.27     61915.81    798044.76</span>
<span class="co">#&gt;  [21] 243719880.64  42133359.39 294249103.19  17501940.36  11110161.93</span>
<span class="co">#&gt;  [26]  60320321.97    330108.58  17668721.84 201118376.62 199496234.61</span>
<span class="co">#&gt;  [31]  75651469.00   4712995.07 127692392.10    532689.50  11009043.64</span>
<span class="co">#&gt;  [36]  18985200.84    204838.26   4864333.06   2581329.00    107314.27</span>
<span class="co">#&gt;  [41]  13694208.72   3701593.96   1896970.72  10580504.24 145286238.74</span>
<span class="co">#&gt;  [46]  23423667.25  55942257.99  30770566.99   8101077.80 148109136.96</span>
<span class="co">#&gt;  [51]   1047769.68  56261959.04 207209654.53    352557.78   6249216.23</span>
<span class="co">#&gt;  [56]     35149.49   4490844.00   4954996.07   1205624.46  28637500.40</span>
<span class="co">#&gt;  [61]   3635299.16   3204730.66   9716583.58   1540433.91   7892943.96</span>
<span class="co">#&gt;  [66] 266975173.04  54268837.90   6725057.58 106114461.80   5583249.77</span>
<span class="co">#&gt;  [71]   5951919.24  35058003.57 152315691.94     12863.76 101691307.01</span>
<span class="co">#&gt;  [76]    107652.34  10214487.38 264560113.05  35960172.58    482572.77</span>
<span class="co">#&gt;  [81]   7831763.25    187709.21  15150649.65  16379980.08   5044211.68</span>
<span class="co">#&gt;  [86]   1375638.53   1211370.21   2901627.40  45541532.74 226371125.87</span>
<span class="co">#&gt;  [91]  12823375.77   1343714.76   5819690.29   1523142.49    701481.50</span>
<span class="co">#&gt;  [96]   2192712.98    464496.80  27072612.10  31184253.04   4576682.08</span></code></pre></div>
<p>Units can be plotted:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## convert to million gallons per day</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"1E6gallons/day"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<p><img src="units_files/figure-html/unitshistbase-1.png" width="700"></p>
<p>The <a href="https://ggforce.data-imaginist.com/" class="external-link">ggforce</a> package is required to handle plotting units in ggplot2:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com" class="external-link">ggforce</a></span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> </code></pre></div>
<p><img src="units_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="units-with-ldc">Units with ldc<a class="anchor" aria-label="anchor" href="#units-with-ldc"></a>
</h2>
<p>Stream loads are measured in pounds or kilograms per day for pollutants such as nutrients and sediment. Fecal bacteria loads are typically in colony forming units (cfu) or most probable number (MPN) per day. The included <code>tres_palacios</code> dataset includes bacteria and flow measurements from the Tres Palacios river. Bacteria measurements will need to units in “cfu/100mL” and flow should be in “cubic feet per second.”</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="co">## create a cfu unit. it is a simple count, so we just add it as an arbitrary unit.</span>
<span class="fu"><a href="https://rdrr.io/pkg/units/man/install_unit.html" class="external-link">install_unit</a></span><span class="op">(</span><span class="st">"cfu"</span><span class="op">)</span>

<span class="co">## format the data for use in ldc</span>
<span class="va">tres_palacios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">tres_palacios</span><span class="op">)</span> |&gt;
  <span class="co">## flow must have units, here is is in cfs</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="st">"ft^3/s"</span><span class="op">)</span><span class="op">)</span>|&gt;
  <span class="co">## pollutant concentration must have units</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Indicator_Bacteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Indicator_Bacteria</span>, <span class="st">"cfu/100mL"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tres_palacios</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 4</span></span>
<span class="co">#&gt;    site_no  Date           Flow Indicator_Bacteria</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[ft^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-01-01     0.84                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-01-02     3                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-01-03     3.4                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-01-04     2.6                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-01-05     1.6                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-01-06     3.2                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-01-07    11                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-08    17                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-01-09    22                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-01-10    18                    <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows</span></span></code></pre></div>
<p>The tibble above shows the correct units in each column. What if we want to use metric units for flow?</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tres_palacios</span> <span class="op">&lt;-</span> <span class="va">tres_palacios</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Flow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Flow</span>, <span class="st">"m^3/s"</span><span class="op">)</span><span class="op">)</span>
<span class="va">tres_palacios</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 4</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-01-01  0.023<span style="text-decoration: underline;">8</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-01-02  0.085<span style="text-decoration: underline;">0</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-01-03  0.096<span style="text-decoration: underline;">3</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-01-04  0.073<span style="text-decoration: underline;">6</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-01-05  0.045<span style="text-decoration: underline;">3</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-01-06  0.090<span style="text-decoration: underline;">6</span>                 <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-01-07  0.311                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-08  0.481                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-01-09  0.623                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-01-10  0.510                  <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows</span></span></code></pre></div>
<p>Now we can calculate the flow and load exceedance probabilities using <code><a href="../reference/calc_ldc.html">calc_ldc()</a></code>. Q and C arguments must have units attached and C must be a concentration unit (mass or counts divided by volume).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">## specify the allowable concentration</span>
<span class="va">allowable_concentration</span> <span class="op">&lt;-</span> <span class="fl">126</span>
<span class="co">## set the units</span>
<span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">units</a></span><span class="op">(</span><span class="va">allowable_concentration</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"cfu/100mL"</span>

<span class="co">## calculate the exceedance probabilities along with</span>
<span class="co">## allowable pollutant loads and measured pollutant loads</span>
<span class="co">## at given probabilities</span>
<span class="va">df_ldc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_ldc.html">calc_ldc</a></span><span class="op">(</span><span class="va">tres_palacios</span>, 
                   Q <span class="op">=</span> <span class="va">Flow</span>, 
                   C <span class="op">=</span> <span class="va">Indicator_Bacteria</span>, 
                   allowable_concentration <span class="op">=</span> <span class="va">allowable_concentration</span><span class="op">)</span>

<span class="va">df_ldc</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 9</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria Daily_Flow_Volume Daily_Load</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span>         <span style="color: #949494;">[100mL/d]</span>    <span style="color: #949494;">[cfu/d]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-08-18 0.006<span style="text-decoration: underline;">23</span>                 <span style="color: #BB0000;">NA</span>          5<span style="text-decoration: underline;">382</span>466.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-03-07 0.011<span style="text-decoration: underline;">9</span>                  <span style="color: #BB0000;">NA</span>         10<span style="text-decoration: underline;">275</span>617.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-03-06 0.017<span style="text-decoration: underline;">0</span>                  <span style="color: #BB0000;">NA</span>         14<span style="text-decoration: underline;">679</span>453.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-08-22 0.021<span style="text-decoration: underline;">2</span>                  <span style="color: #BB0000;">NA</span>         18<span style="text-decoration: underline;">349</span>317.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-03-08 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">083</span>289.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-08-17 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">083</span>289.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-09-11 0.022<span style="text-decoration: underline;">7</span>                  <span style="color: #BB0000;">NA</span>         19<span style="text-decoration: underline;">572</span>604.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-01 0.023<span style="text-decoration: underline;">8</span>                  <span style="color: #BB0000;">NA</span>         20<span style="text-decoration: underline;">551</span>235.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-08-21 0.026<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>         22<span style="text-decoration: underline;">753</span>153.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-03-05 0.028<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>         24<span style="text-decoration: underline;">465</span>755.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows, and 3 more variables: Allowable_Daily_Load [cfu/d],</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   P_Exceedance &lt;dbl&gt;, Flow_Category &lt;fct&gt;</span></span></code></pre></div>
<p>Now we have the percent exceedance for daily flow, flow volume, and allowable daily loads. The daily flow volume and daily load volume are huge numbers, so it might make sense to convert those units.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_ldc</span> |&gt;
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Daily_Flow_Volume <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Daily_Flow_Volume</span>, <span class="st">"m^3/day"</span><span class="op">)</span>,
         Allowable_Daily_Load <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">Allowable_Daily_Load</span>, <span class="st">"1E9cfu/day"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,671 × 9</span></span>
<span class="co">#&gt;    site_no  Date          Flow Indicator_Bacteria Daily_Flow_Volume Daily_Load</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494;">[m^3/s]</span>        <span style="color: #949494;">[cfu/100mL]</span>           <span style="color: #949494;">[m^3/d]</span>    <span style="color: #949494;">[cfu/d]</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 08162600 2000-08-18 0.006<span style="text-decoration: underline;">23</span>                 <span style="color: #BB0000;">NA</span>              538.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 08162600 2000-03-07 0.011<span style="text-decoration: underline;">9</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>028.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 08162600 2000-03-06 0.017<span style="text-decoration: underline;">0</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>468.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 08162600 2000-08-22 0.021<span style="text-decoration: underline;">2</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>835.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 08162600 2000-03-08 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>908.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 08162600 2000-08-17 0.022<span style="text-decoration: underline;">1</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>908.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 08162600 2000-09-11 0.022<span style="text-decoration: underline;">7</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">1</span>957.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 08162600 2000-01-01 0.023<span style="text-decoration: underline;">8</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>055.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 08162600 2000-08-21 0.026<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>275.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 08162600 2000-03-05 0.028<span style="text-decoration: underline;">3</span>                  <span style="color: #BB0000;">NA</span>             <span style="text-decoration: underline;">2</span>447.         <span style="color: #BB0000;">NA</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 7,661 more rows, and 3 more variables:</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   Allowable_Daily_Load [1E9cfu/d], P_Exceedance &lt;dbl&gt;, Flow_Category &lt;fct&gt;</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Schramm.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
